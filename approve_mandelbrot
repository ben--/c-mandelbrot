#!/bin/sh
set -e

expected_checksum() {
	echo "9ad1e099ace407109333e05a3daf5a0ba06573e3"
}

actual_checksum() {
	shasum "$1" | awk '{print $1}'
}

main() {
	expected=$(expected_checksum)
	actual=$(actual_checksum "$1")
	if [ $expected == $actual ]; then
		exit 0
	else
		echo >&2 "'$1' has changed! now it's..."
		echo >&2 $actual
		open "$1"
		exit 77
	fi
}

main "$@"
exit $?
